/*!
 * Squid 总结、积累、收集的一些基础方法
 * http://www.cnblogs.com/typeof/
 *
 * 所有plugins、swing所做的扩展都是基于Squid对象
 */
(function(c){var f=function(){},e=Array.prototype.slice,g=Array.prototype.splice,a=String.prototype.trim;f.extend=function(){var l=arguments[0],j=1,k=arguments.length,h,m;if(typeof l!=="object"){l={}}if(k===j){l=this;--j}for(;j<k;j++){if((h=arguments[j])!=null){for(m in h){l[m]=h[m]}}}return l};f.extend({getElementById:function(n){var l=document.getElementById(n);if(l&&l.parentNode){if(l.id!==n){l=null;var h=document.getElementsByTagName(n),j=0,k=h.length,m;for(;j<k;j++){m=h[j];if(m.id===n){l=m;break}}}return l}},getElementsByTagName:function(l,k){k=k||document;var h=k.getElementsByTagName(l),o=[];try{o=e.call(h,0)}catch(p){var j=0,n=h.length,m;for(;j<n;j++){m=h[j];o.push(m)}}return o},getElementsByClassName:function(l,k){k=k||document;var o=[];if(k.getElementsByClassName){var h=k.getElementsByClassName(l);o=e.call(h,0)}else{var h,n,j=0,m;h=k.getElementsByTagName("*");m=h.length;for(;j<m;j++){n=h[j];if(n.className&&(" "+n.className+" ").replace(/[\t\n\r]/g," ").indexOf(l)>=0){o.push(n)}}}return o},children:function(h){},first:function(h){return this.sibling(h.firstChild)[0]},next:function(h){return this.nth(h,2,"nextSibling")},siblings:function(h){return this.sibling(h.parentNode.firstChild,h)},nth:function(l,k,h){k=k||1;var j=0;for(;l;l=l[h]){if(l.nodeType===1&&++j===k){break}}return l},sibling:function(j,i){var h=[];for(;j;j=j.nextSibling){if(j.nodeType===1&&j!==i){h.push(j)}}return h},isVisible:function(h){return !this.isHidden(h)},isHidden:function(j){if(j){var i=j.offsetWidth,h=j.offsetHeight;return(i===0&&h===0)||j.style.display==="none"}},getOffset:function(l){var p=document.body,j=document.documentElement;if("getBoundingClientRect" in document.documentElement){var o;try{o=l.getBoundingClientRect()}catch(s){}if(!o||!l.parentNode){return o?{top:o.top,left:o.left}:{top:0,left:0}}var q=c,n=j.clientTop||p.clientTop||0,r=j.clientLeft||p.clientLeft||0,i=q.pageYOffset||j.scrollTop||p.scrollTop,m=q.pageXOffset||j.scrollLeft||p.scrollLeft,t=o.top+i-n,k=o.left+m-r;return{top:t,left:k}}else{var h=l.offsetParent,t=l.offsetTop,k=l.offsetLeft;while((l=l.parentNode)&&l!==p&&l!==j){if(l===h){t=l.offsetTop;k=l.offsetLeft;h=l.offsetParent}}return{top:t,left:k}}},position:function(j){if(!j){return null}var i=j.offsetParent,k=this.getOffset(j),h=this.getOffset(i);return{top:k.top-h.top,left:k.left-h.left}}});var b={};f.extend({guid:1,uuid:0,expando:"squid"+(Math.random()+"").replace(/\D/g,""),data:function(k,i){var h=squid.expando,m,l,j;m=k[squid.expando];if(!m){k[squid.expando]=m=++squid.uuid}if(!b[m]){b[m]={}}if(typeof i==="object"||typeof i==="function"){b[m][h]=i}l=b[m];if(!l[h]){l[h]={}}l=l[h];if(i==="events"&&!l[i]){return l[h]&&l[h].events}if(typeof i==="string"){j=l[i]}else{j=l}return j},removeData:function(k,j){var i=squid.expando,m=k[squid.expando],h;if(!b[m]){return}try{delete b[m]}catch(l){b[m]=null}if(k.removeAttribute){k.removeAttribute(squid.expando)}else{k[squid.expando]=null}}});f.event={add:function(o,n,m){var h,l,k,j,i;if(o.nodeType===3||o.nodeType===8){return}if(!m){return}if(!m.guid){m.guid=squid.guid++}h=squid.data(o);if(!h){return}l=h.events;k=h.handle;if(!l){h.events=l={}}if(!k){h.handle=k=function(p){return squid.event.handle.apply(k.elem,arguments)};k.elem=o}j={handler:m};j.type=n;if(!j.guid){j.guid=m.guid}i=l[n];if(!i){i=l[n]=[];if(o.addEventListener){o.addEventListener(n,k,false)}else{if(o.attachEvent){o.attachEvent("on"+n,k)}}}i.push(j)},remove:function(p,o,n){var h,m,l,k=0,j;if(p.nodeType===3||p.nodeType===8){return}h=squid.data(p);m=h.events;if(!m){return}l=m[o]||[];if(!n){for(;k<l.length;k++){j=l[k];squid.event.remove(p,o,j.handler);l.splice(k--,1)}}if(l.length===0){if(p.removeEventListener){p.removeEventListener(o,h.handle,false)}else{if(p.detachEvent){p.detachEvent("on"+o,h.handle)}}}squid.removeData(p)},handle:function(n){var l=0,m,h,k,j=Array.prototype.slice.call(arguments,0);n=squid.event.fix(n);h=((squid.data(this,"events")||{})[n.type]||[]).slice(0);j[0]=n;m=h.length;for(;l<m;l++){k=h[l];n.handler=k.handler;n.handleObj=k;k.handler.apply(this,j)}},fix:function(i){if(!i.target){i.target=i.srcElement||document}if(i.target.nodeType===3){i.target=i.target.parentNode}if(!i.relateTarget&&i.fromElement){i.relateTarget=i.fromElement===i.target?i.toElement:i.fromElement}if(!i.preventDefault){i.preventDefault=function(){i.returnValue=false}}if(!i.stopPropagation){i.stopPropagation=function(){i.cancelBubble=true}}if(i.pageX==null){var j=i.target.ownerDocument||document,k=j.documentElment,h=j.body;i.pageX=i.clientX+(k&&document.scrollLeft||h&&h.scrollLeft||0)-(k&&k.clientLeft||h&&h.clientLeft||0);i.pageY=i.clientY+(k&&document.scrollTop||h&&h.scrollTop||0)-(k&&k.clientTop||h&&h.clientTop||0)}return i}};f.extend({on:function(j,i,h){return this.event.add(j,i,h)},off:function(j,i,h){return this.event.remove(j,i,h)},proxy:function(k,j){var l=Array.prototype.slice,h=l.call(arguments,2),i=function(){return k.apply(j,h.concat(l.call(arguments)))};i.guid=k.guid=k.guid||i.guid||squid.guid++;return i}});var d=0;f.extend({trim:a?function(h){return a.call(h)}:function(h){return h.toString().replace(/^\s+/,"").replace(/\s+$/,"")},throttle:function(j,h,i){h=h||100;i=i||null;return function(){var k=arguments;clearTimeout(d);d=setTimeout(function(){j.apply(i,k)},h)}},isEmpty:function(h){for(var i in h){return false}return true}});f.plugin=function(){};f.swing=function(){};c.squid=f})(window);