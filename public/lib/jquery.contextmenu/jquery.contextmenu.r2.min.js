(function(f){var a,j,c,h,e,b;var d={menuStyle:{listStyle:"none",padding:"1px",margin:"0px",backgroundColor:"#fff",border:"1px solid #999",width:"100px"},itemStyle:{margin:"0px",color:"#000",display:"block",cursor:"default",padding:"3px",border:"1px solid #fff",backgroundColor:"transparent"},itemHoverStyle:{border:"1px solid #0a246a",backgroundColor:"#b6bdd2"},eventPosX:"pageX",eventPosY:"pageY",shadow:true,onContextMenu:null,onShowMenu:null};f.fn.contextMenu=function(m,l){if(!a){a=f('<div id="jqContextMenu"></div>').hide().css({position:"absolute",zIndex:"500"}).appendTo("body").bind("click",function(n){n.stopPropagation()})}if(!j){j=f("<div></div>").css({backgroundColor:"#000",position:"absolute",opacity:0.2,zIndex:499}).appendTo("body").hide()}e=e||[];e.push({id:m,menuStyle:f.extend({},d.menuStyle,l.menuStyle||{}),itemStyle:f.extend({},d.itemStyle,l.itemStyle||{}),itemHoverStyle:f.extend({},d.itemHoverStyle,l.itemHoverStyle||{}),bindings:l.bindings||{},shadow:l.shadow||l.shadow===false?l.shadow:d.shadow,onContextMenu:l.onContextMenu||d.onContextMenu,onShowMenu:l.onShowMenu||d.onShowMenu,eventPosX:l.eventPosX||d.eventPosX,eventPosY:l.eventPosY||d.eventPosY});var k=e.length-1;f(this).bind("contextmenu",function(o){var n=(!!e[k].onContextMenu)?e[k].onContextMenu(o):true;if(n){i(k,this,o,l)}return false});return this};function i(m,l,n,k){var o=e[m];h=f("#"+o.id).find("ul:first").clone(true);h.css(o.menuStyle).find("li").css(o.itemStyle).hover(function(){f(this).css(o.itemHoverStyle)},function(){f(this).css(o.itemStyle)}).find("img").css({verticalAlign:"middle",paddingRight:"2px"});a.html(h);if(!!o.onShowMenu){a=o.onShowMenu(n,a)}f.each(o.bindings,function(q,p){f("#"+q,a).bind("click",function(r){g();p(l,b)})});a.css({left:n[o.eventPosX],top:n[o.eventPosY]}).show();if(o.shadow){j.css({width:a.width(),height:a.height(),left:n.pageX+2,top:n.pageY+2}).show()}f(document).one("click",g)}function g(){a.hide();j.hide()}f.contextMenu={defaults:function(k){f.each(k,function(l,m){if(typeof m=="object"&&d[l]){f.extend(d[l],m)}else{d[l]=m}})}}})(jQuery);$(function(){$("div.contextMenu").hide()});