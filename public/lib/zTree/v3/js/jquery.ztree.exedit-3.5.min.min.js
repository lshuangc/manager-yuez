(function(s){var r={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},q={onHoverOverNode:function(f,g){var o=c.getSetting(f.data.treeId),m=c.getRoot(o);if(m.curHoverNode!=g){q.onHoverOutNode(f)}m.curHoverNode=g;k.addHoverDom(o,g)},onHoverOutNode:function(d){var d=c.getSetting(d.data.treeId),f=c.getRoot(d);if(f.curHoverNode&&!c.isSelectedNode(d,f.curHoverNode)){k.removeTreeDom(d,f.curHoverNode),f.curHoverNode=null}},onMousedownNode:function(ah,ai){function ag(ak){if(V.dragFlag==0&&Math.abs(o-ak.clientX)<af.edit.drag.minMoveSize&&Math.abs(m-ak.clientY)<af.edit.drag.minMoveSize){return !0}var al,aj,O,R,U;U=af.data.key.children;w.css("cursor","pointer");if(V.dragFlag==0){if(i.apply(af.callback.beforeDrag,[af.treeId,aa],!0)==!1){return W(ak),!0}for(al=0,aj=aa.length;al<aj;al++){if(al==0){V.dragNodeShowBefore=[]}O=aa[al];O.isParent&&O.open?(k.expandCollapseNode(af,O,!O.open),V.dragNodeShowBefore[O.tId]=!0):V.dragNodeShowBefore[O.tId]=!1}V.dragFlag=1;P.showHoverDom=!1;i.showIfameMask(af,!0);O=!0;R=-1;if(aa.length>1){var T=aa[0].parentTId?aa[0].getParentNode()[U]:c.getNodes(af);U=[];for(al=0,aj=T.length;al<aj;al++){if(V.dragNodeShowBefore[T[al].tId]!==void 0&&(O&&R>-1&&R+1!==al&&(O=!1),U.push(T[al]),R=al),aa.length===U.length){aa=U;break}}}O&&(E=aa[0].getPreNode(),g=aa[aa.length-1].getNextNode());S=a("<ul class='zTreeDragUL'></ul>",af);for(al=0,aj=aa.length;al<aj;al++){O=aa[al],O.editNameFlag=!1,k.selectNode(af,O,al>0),k.removeTreeDom(af,O),al>af.edit.drag.maxShowNodeNum-1||(R=a("<li id='"+O.tId+"_tmp'></li>",af),R.append(a(O,n.id.A,af).clone()),R.css("padding","0"),R.children("#"+O.tId+n.id.A).removeClass(n.node.CURSELECTED),S.append(R),al==af.edit.drag.maxShowNodeNum-1&&(R=a("<li id='"+O.tId+"_moretmp'><a>  ...  </a></li>",af),S.append(R)))}S.attr("id",aa[0].tId+n.id.UL+"_tmp");S.addClass(af.treeObj.attr("class"));S.appendTo(w);X=a("<span class='tmpzTreeMove_arrow'></span>",af);X.attr("id","zTreeMove_arrow_tmp");X.appendTo(w);af.treeObj.trigger(n.event.DRAG,[ak,af.treeId,aa])}if(V.dragFlag==1){Q&&X.attr("id")==ak.target.id&&I&&ak.clientX+K.scrollLeft()+2>s("#"+I+n.id.A,Q).offset().left?(O=s("#"+I+n.id.A,Q),ak.target=O.length>0?O.get(0):ak.target):Q&&(Q.removeClass(n.node.TMPTARGET_TREE),I&&s("#"+I+n.id.A,Q).removeClass(n.node.TMPTARGET_NODE+"_"+n.move.TYPE_PREV).removeClass(n.node.TMPTARGET_NODE+"_"+r.move.TYPE_NEXT).removeClass(n.node.TMPTARGET_NODE+"_"+r.move.TYPE_INNER));I=Q=null;z=!1;ae=af;O=c.getSettings();for(var F in O){if(O[F].treeId&&O[F].edit.enable&&O[F].treeId!=af.treeId&&(ak.target.id==O[F].treeId||s(ak.target).parents("#"+O[F].treeId).length>0)){z=!0,ae=O[F]}}F=K.scrollTop();R=K.scrollLeft();U=ae.treeObj.offset();al=ae.treeObj.get(0).scrollHeight;O=ae.treeObj.get(0).scrollWidth;aj=ak.clientY+F-U.top;var N=ae.treeObj.height()+U.top-ak.clientY-F,M=ak.clientX+R-U.left,H=ae.treeObj.width()+U.left-ak.clientX-R;U=aj<af.edit.drag.borderMax&&aj>af.edit.drag.borderMin;var T=N<af.edit.drag.borderMax&&N>af.edit.drag.borderMin,D=M<af.edit.drag.borderMax&&M>af.edit.drag.borderMin,J=H<af.edit.drag.borderMax&&H>af.edit.drag.borderMin,N=aj>af.edit.drag.borderMin&&N>af.edit.drag.borderMin&&M>af.edit.drag.borderMin&&H>af.edit.drag.borderMin,M=U&&ae.treeObj.scrollTop()<=0,H=T&&ae.treeObj.scrollTop()+ae.treeObj.height()+10>=al,B=D&&ae.treeObj.scrollLeft()<=0,v=J&&ae.treeObj.scrollLeft()+ae.treeObj.width()+10>=O;if(ak.target&&i.isChildOrSelf(ak.target,ae.treeId)){for(var L=ak.target;L&&L.tagName&&!i.eqs(L.tagName,"li")&&L.id!=ae.treeId;){L=L.parentNode}var u=!0;for(al=0,aj=aa.length;al<aj;al++){if(O=aa[al],L.id===O.tId){u=!1;break}else{if(a(O,af).find("#"+L.id).length>0){u=!1;break}}}if(u&&ak.target&&i.isChildOrSelf(ak.target,L.id+n.id.A)){Q=s(L),I=L.id}}O=aa[0];if(N&&i.isChildOrSelf(ak.target,ae.treeId)){if(!Q&&(ak.target.id==ae.treeId||M||H||B||v)&&(z||!z&&O.parentTId)){Q=ae.treeObj}U?ae.treeObj.scrollTop(ae.treeObj.scrollTop()-10):T&&ae.treeObj.scrollTop(ae.treeObj.scrollTop()+10);D?ae.treeObj.scrollLeft(ae.treeObj.scrollLeft()-10):J&&ae.treeObj.scrollLeft(ae.treeObj.scrollLeft()+10);Q&&Q!=ae.treeObj&&Q.offset().left<ae.treeObj.offset().left&&ae.treeObj.scrollLeft(ae.treeObj.scrollLeft()+Q.offset().left-ae.treeObj.offset().left)}S.css({top:ak.clientY+F+3+"px",left:ak.clientX+R+3+"px"});U=al=0;if(Q&&Q.attr("id")!=ae.treeId){var C=I==null?null:c.getNodeCache(ae,I);aj=(ak.ctrlKey||ak.metaKey)&&af.edit.drag.isMove&&af.edit.drag.isCopy||!af.edit.drag.isMove&&af.edit.drag.isCopy;al=!!(E&&I===E.tId);U=!!(g&&I===g.tId);R=O.parentTId&&O.parentTId==I;O=(aj||!U)&&i.apply(ae.edit.drag.prev,[ae.treeId,aa,C],!!ae.edit.drag.prev);al=(aj||!al)&&i.apply(ae.edit.drag.next,[ae.treeId,aa,C],!!ae.edit.drag.next);J=(aj||!R)&&!(ae.data.keep.leaf&&!C.isParent)&&i.apply(ae.edit.drag.inner,[ae.treeId,aa,C],!!ae.edit.drag.inner);if(!O&&!al&&!J){if(Q=null,I="",G=n.move.TYPE_INNER,X.css({display:"none"}),window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}}else{aj=s("#"+I+n.id.A,Q);U=C.isLastNode?null:s("#"+C.getNextNode().tId+n.id.A,Q.next());T=aj.offset().top;R=aj.offset().left;D=O?J?0.25:al?0.5:1:-1;J=al?J?0.75:O?0.5:0:-1;F=(ak.clientY+F-T)/aj.height();(D==1||F<=D&&F>=-0.2)&&O?(al=1-X.width(),U=T-X.height()/2,G=n.move.TYPE_PREV):(J==0||F>=J&&F<=1.2)&&al?(al=1-X.width(),U=U==null||C.isParent&&C.open?T+aj.height()-X.height()/2:U.offset().top-X.height()/2,G=n.move.TYPE_NEXT):(al=5-X.width(),U=T,G=n.move.TYPE_INNER);X.css({display:"block",top:U+"px",left:R+al+"px"});aj.addClass(n.node.TMPTARGET_NODE+"_"+G);if(f!=I||d!=G){y=(new Date).getTime()}if(C&&C.isParent&&G==n.move.TYPE_INNER&&(F=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==C.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===C.tId&&(F=!1),F)){window.zTreeMoveTimer=setTimeout(function(){G==n.move.TYPE_INNER&&C&&C.isParent&&!C.open&&(new Date).getTime()-y>ae.edit.drag.autoOpenTime&&i.apply(ae.callback.beforeDragOpen,[ae.treeId,C],!0)&&(k.switchNode(ae,C),ae.edit.drag.autoExpandTrigger&&ae.treeObj.trigger(n.event.EXPAND,[ae.treeId,C]))},ae.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=C.tId}}}else{if(G=n.move.TYPE_INNER,Q&&i.apply(ae.edit.drag.inner,[ae.treeId,aa,null],!!ae.edit.drag.inner)?Q.addClass(n.node.TMPTARGET_TREE):Q=null,X.css({display:"none"}),window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}}f=I;d=G;af.treeObj.trigger(n.event.DRAGMOVE,[ak,af.treeId,aa])}return !1}function W(v){if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null}d=f=null;K.unbind("mousemove",ag);K.unbind("mouseup",W);K.unbind("selectstart",ab);w.css("cursor","auto");Q&&(Q.removeClass(n.node.TMPTARGET_TREE),I&&s("#"+I+n.id.A,Q).removeClass(n.node.TMPTARGET_NODE+"_"+n.move.TYPE_PREV).removeClass(n.node.TMPTARGET_NODE+"_"+r.move.TYPE_NEXT).removeClass(n.node.TMPTARGET_NODE+"_"+r.move.TYPE_INNER));i.showIfameMask(af,!1);P.showHoverDom=!0;if(V.dragFlag!=0){V.dragFlag=0;var x,C,B;for(x=0,C=aa.length;x<C;x++){B=aa[x],B.isParent&&V.dragNodeShowBefore[B.tId]&&!B.open&&(k.expandCollapseNode(af,B,!B.open),delete V.dragNodeShowBefore[B.tId])}S&&S.remove();X&&X.remove();var F=(v.ctrlKey||v.metaKey)&&af.edit.drag.isMove&&af.edit.drag.isCopy||!af.edit.drag.isMove&&af.edit.drag.isCopy;!F&&Q&&I&&aa[0].parentTId&&I==aa[0].parentTId&&G==n.move.TYPE_INNER&&(Q=null);if(Q){var D=I==null?null:c.getNodeCache(ae,I);if(i.apply(af.callback.beforeDrop,[ae.treeId,aa,D,G,F],!0)==!1){k.selectNodes(A,aa)}else{var u=F?i.clone(aa):aa;x=function(){if(z){if(!F){for(var H=0,J=aa.length;H<J;H++){k.removeNode(af,aa[H])}}if(G==n.move.TYPE_INNER){k.addNodes(ae,D,u)}else{if(k.addNodes(ae,D.getParentNode(),u),G==n.move.TYPE_PREV){for(H=0,J=u.length;H<J;H++){k.moveNode(ae,D,u[H],G,!1)}}else{for(H=-1,J=u.length-1;H<J;J--){k.moveNode(ae,D,u[J],G,!1)}}}}else{if(F&&G==n.move.TYPE_INNER){k.addNodes(ae,D,u)}else{if(F&&k.addNodes(ae,D.getParentNode(),u),G!=n.move.TYPE_NEXT){for(H=0,J=u.length;H<J;H++){k.moveNode(ae,D,u[H],G,!1)}}else{for(H=-1,J=u.length-1;H<J;J--){k.moveNode(ae,D,u[J],G,!1)}}}}k.selectNodes(ae,u);a(u[0],af).focus().blur();af.treeObj.trigger(n.event.DROP,[v,ae.treeId,u,D,G,F])};G==n.move.TYPE_INNER&&i.canAsync(ae,D)?k.asyncNode(ae,D,!1,x):x()}}else{k.selectNodes(A,aa),af.treeObj.trigger(n.event.DROP,[v,af.treeId,aa,null,null,null])}}}function ab(){return !1}var ad,ac,af=c.getSetting(ah.data.treeId),V=c.getRoot(af),P=c.getRoots();if(ah.button==2||!af.edit.enable||!af.edit.drag.isCopy&&!af.edit.drag.isMove){return !0}var Z=ah.target,Y=c.getRoot(af).curSelectedList,aa=[];if(c.isSelectedNode(af,ai)){for(ad=0,ac=Y.length;ad<ac;ad++){if(Y[ad].editNameFlag&&i.eqs(Z.tagName,"input")&&Z.getAttribute("treeNode"+n.id.INPUT)!==null){return !0}aa.push(Y[ad]);if(aa[0].parentTId!==Y[ad].parentTId){aa=[ai];break}}}else{aa=[ai]}k.editNodeBlur=!0;k.cancelCurEditNode(af);var K=s(af.treeObj.get(0).ownerDocument),w=s(af.treeObj.get(0).ownerDocument.body),S,X,Q,z=!1,ae=af,A=af,E,g,f=null,d=null,I=null,G=n.move.TYPE_INNER,o=ah.clientX,m=ah.clientY,y=(new Date).getTime();i.uCanDo(af)&&K.bind("mousemove",ag);K.bind("mouseup",W);K.bind("selectstart",ab);ah.preventDefault&&ah.preventDefault();return !0}};s.extend(!0,s.fn.zTree.consts,r);s.extend(!0,s.fn.zTree._z,{tools:{getAbs:function(d){d=d.getBoundingClientRect();return[d.left+(document.body.scrollLeft+document.documentElement.scrollLeft),d.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(d){d.get(0)&&(d.focus(),i.setCursorPosition(d.get(0),d.val().length))},inputSelect:function(d){d.get(0)&&(d.focus(),d.select())},setCursorPosition:function(d,f){if(d.setSelectionRange){d.focus(),d.setSelectionRange(f,f)}else{if(d.createTextRange){var g=d.createTextRange();g.collapse(!0);g.moveEnd("character",f);g.moveStart("character",f);g.select()}}},showIfameMask:function(g,m){for(var y=c.getRoot(g);y.dragMaskList.length>0;){y.dragMaskList[0].remove(),y.dragMaskList.shift()}if(m){for(var x=a("iframe",g),v=0,u=x.length;v<u;v++){var o=x.get(v),w=i.getAbs(o),o=a("<div id='zTreeMask_"+v+"' class='zTreeMask' style='top:"+w[1]+"px; left:"+w[0]+"px; width:"+o.offsetWidth+"px; height:"+o.offsetHeight+"px;'></div>",g);o.appendTo(a("body",g));y.dragMaskList.push(o)}}}},view:{addEditBtn:function(d,f){if(!(f.editNameFlag||a(f,n.id.EDIT,d).length>0)&&i.apply(d.edit.showRenameBtn,[d.treeId,f],d.edit.showRenameBtn)){var m=a(f,n.id.A,d),g="<span class='"+n.className.BUTTON+" edit' id='"+f.tId+n.id.EDIT+"' title='"+i.apply(d.edit.renameTitle,[d.treeId,f],d.edit.renameTitle)+"' treeNode"+n.id.EDIT+" style='display:none;'></span>";m.append(g);a(f,n.id.EDIT,d).bind("click",function(){if(!i.uCanDo(d)||i.apply(d.callback.beforeEditName,[d.treeId,f],!0)==!1){return !1}k.editNode(d,f);return !1}).show()}},addRemoveBtn:function(d,f){if(!(f.editNameFlag||a(f,n.id.REMOVE,d).length>0)&&i.apply(d.edit.showRemoveBtn,[d.treeId,f],d.edit.showRemoveBtn)){var m=a(f,n.id.A,d),g="<span class='"+n.className.BUTTON+" remove' id='"+f.tId+n.id.REMOVE+"' title='"+i.apply(d.edit.removeTitle,[d.treeId,f],d.edit.removeTitle)+"' treeNode"+n.id.REMOVE+" style='display:none;'></span>";m.append(g);a(f,n.id.REMOVE,d).bind("click",function(){if(!i.uCanDo(d)||i.apply(d.callback.beforeRemove,[d.treeId,f],!0)==!1){return !1}k.removeNode(d,f);d.treeObj.trigger(n.event.REMOVE,[d.treeId,f]);return !1}).bind("mousedown",function(){return !0}).show()}},addHoverDom:function(d,f){if(c.getRoots().showHoverDom){f.isHover=!0,d.edit.enable&&(k.addEditBtn(d,f),k.addRemoveBtn(d,f)),i.apply(d.view.addHoverDom,[d.treeId,f])}},cancelCurEditNode:function(d,f,v){var u=c.getRoot(d),g=d.data.key.name,o=u.curEditNode;if(o){var m=u.curEditInput,f=f?f:v?o[g]:m.val();if(i.apply(d.callback.beforeRename,[d.treeId,o,f,v],!0)===!1){return !1}o[g]=f;a(o,n.id.A,d).removeClass(n.node.CURSELECTED_EDIT);m.unbind();k.setNodeName(d,o);o.editNameFlag=!1;u.curEditNode=null;u.curEditInput=null;k.selectNode(d,o,!1);d.treeObj.trigger(n.event.RENAME,[d.treeId,o,v])}return u.noSelection=!0},editNode:function(d,f){var o=c.getRoot(d);k.editNodeBlur=!1;if(c.isSelectedNode(d,f)&&o.curEditNode==f&&f.editNameFlag){setTimeout(function(){i.inputFocus(o.curEditInput)},0)}else{var m=d.data.key.name;f.editNameFlag=!0;k.removeTreeDom(d,f);k.cancelCurEditNode(d);k.selectNode(d,f,!1);a(f,n.id.SPAN,d).html("<input type=text class='rename' id='"+f.tId+n.id.INPUT+"' treeNode"+n.id.INPUT+" >");var g=a(f,n.id.INPUT,d);g.attr("value",f[m]);d.edit.editNameSelectAll?i.inputSelect(g):i.inputFocus(g);g.bind("blur",function(){k.editNodeBlur||k.cancelCurEditNode(d)}).bind("keydown",function(u){u.keyCode=="13"?(k.editNodeBlur=!0,k.cancelCurEditNode(d)):u.keyCode=="27"&&k.cancelCurEditNode(d,null,!0)}).bind("click",function(){return !1}).bind("dblclick",function(){return !1});a(f,n.id.A,d).addClass(n.node.CURSELECTED_EDIT);o.curEditInput=g;o.noSelection=!1;o.curEditNode=f}},moveNode:function(E,G,C,f,v,z){var y=c.getRoot(E),B=E.data.key.children;if(G!=C&&(!E.data.keep.leaf||!G||G.isParent||f!=n.move.TYPE_INNER)){var A=C.parentTId?C.getParentNode():y,I=G===null||G==y;I&&G===null&&(G=y);if(I){f=n.move.TYPE_INNER}y=G.parentTId?G.getParentNode():y;if(f!=n.move.TYPE_PREV&&f!=n.move.TYPE_NEXT){f=n.move.TYPE_INNER}if(f==n.move.TYPE_INNER){if(I){C.parentTId=null}else{if(!G.isParent){G.isParent=!0,G.open=!!G.open,k.setNodeLineIcos(E,G)}C.parentTId=G.tId}}var o;I?o=I=E.treeObj:(!z&&f==n.move.TYPE_INNER?k.expandCollapseNode(E,G,!0,!1):z||k.expandCollapseNode(E,G.getParentNode(),!0,!1),I=a(G,E),o=a(G,n.id.UL,E),I.get(0)&&!o.get(0)&&(o=[],k.makeUlHtml(E,G,o,""),I.append(o.join(""))),o=a(G,n.id.UL,E));var m=a(C,E);m.get(0)?I.get(0)||m.remove():m=k.appendNodes(E,C.level,[C],null,!1,!0).join("");o.get(0)&&f==n.move.TYPE_INNER?o.append(m):I.get(0)&&f==n.move.TYPE_PREV?I.before(m):I.get(0)&&f==n.move.TYPE_NEXT&&I.after(m);var u=-1,H=0,F=null,I=null,d=C.level;if(C.isFirstNode){if(u=0,A[B].length>1){F=A[B][1],F.isFirstNode=!0}}else{if(C.isLastNode){u=A[B].length-1,F=A[B][u-1],F.isLastNode=!0}else{for(o=0,m=A[B].length;o<m;o++){if(A[B][o].tId==C.tId){u=o;break}}}}u>=0&&A[B].splice(u,1);if(f!=n.move.TYPE_INNER){for(o=0,m=y[B].length;o<m;o++){y[B][o].tId==G.tId&&(H=o)}}if(f==n.move.TYPE_INNER){G[B]||(G[B]=[]);if(G[B].length>0){I=G[B][G[B].length-1],I.isLastNode=!1}G[B].splice(G[B].length,0,C);C.isLastNode=!0;C.isFirstNode=G[B].length==1}else{G.isFirstNode&&f==n.move.TYPE_PREV?(y[B].splice(H,0,C),I=G,I.isFirstNode=!1,C.parentTId=G.parentTId,C.isFirstNode=!0,C.isLastNode=!1):G.isLastNode&&f==n.move.TYPE_NEXT?(y[B].splice(H+1,0,C),I=G,I.isLastNode=!1,C.parentTId=G.parentTId,C.isFirstNode=!1,C.isLastNode=!0):(f==n.move.TYPE_PREV?y[B].splice(H,0,C):y[B].splice(H+1,0,C),C.parentTId=G.parentTId,C.isFirstNode=!1,C.isLastNode=!1)}c.fixPIdKeyValue(E,C);c.setSonNodeLevel(E,C.getParentNode(),C);k.setNodeLineIcos(E,C);k.repairNodeLevelClass(E,C,d);!E.data.keep.parent&&A[B].length<1?(A.isParent=!1,A.open=!1,G=a(A,n.id.UL,E),f=a(A,n.id.SWITCH,E),B=a(A,n.id.ICON,E),k.replaceSwitchClass(A,f,n.folder.DOCU),k.replaceIcoClass(A,B,n.folder.DOCU),G.css("display","none")):F&&k.setNodeLineIcos(E,F);I&&k.setNodeLineIcos(E,I);E.check&&E.check.enable&&k.repairChkClass&&(k.repairChkClass(E,A),k.repairParentChkClassWithSelf(E,A),A!=C.parent&&k.repairParentChkClassWithSelf(E,C));z||k.expandCollapseParentNode(E,C.getParentNode(),!0,v)}},removeEditBtn:function(d,f){a(f,n.id.EDIT,d).unbind().remove()},removeRemoveBtn:function(d,f){a(f,n.id.REMOVE,d).unbind().remove()},removeTreeDom:function(d,f){f.isHover=!1;k.removeEditBtn(d,f);k.removeRemoveBtn(d,f);i.apply(d.view.removeHoverDom,[d.treeId,f])},repairNodeLevelClass:function(d,m,v){if(v!==m.level){var u=a(m,d),o=a(m,n.id.A,d),d=a(m,n.id.UL,d),v=n.className.LEVEL+v,m=n.className.LEVEL+m.level;u.removeClass(v);u.addClass(m);o.removeClass(v);o.addClass(m);d.removeClass(v);d.addClass(m)}},selectNodes:function(f,g){for(var o=0,m=g.length;o<m;o++){k.selectNode(f,g[o],o>0)}}},event:{},data:{setSonNodeLevel:function(g,m,v){if(v){var u=g.data.key.children;v.level=m?m.level+1:0;if(v[u]){for(var m=0,o=v[u].length;m<o;m++){v[u][m]&&c.setSonNodeLevel(g,v,v[u][m])}}}}}});var t=s.fn.zTree,i=t._z.tools,n=t.consts,k=t._z.view,c=t._z.data,a=i.$;c.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}});c.addInitBind(function(d){var f=d.treeObj,g=n.event;f.bind(g.RENAME,function(m,v,u,o){i.apply(d.callback.onRename,[m,v,u,o])});f.bind(g.DRAG,function(m,v,u,o){i.apply(d.callback.onDrag,[v,u,o])});f.bind(g.DRAGMOVE,function(m,v,u,o){i.apply(d.callback.onDragMove,[v,u,o])});f.bind(g.DROP,function(v,A,z,w,x,u,y){i.apply(d.callback.onDrop,[A,z,w,x,u,y])})});c.addInitUnBind(function(d){var d=d.treeObj,f=n.event;d.unbind(f.RENAME);d.unbind(f.DRAG);d.unbind(f.DRAGMOVE);d.unbind(f.DROP)});c.addInitCache(function(){});c.addInitNode(function(d,f,g){if(g){g.isHover=!1,g.editNameFlag=!1}});c.addInitProxy(function(y){var z=y.target,x=c.getSetting(y.data.treeId),v=y.relatedTarget,g="",u=null,m="",w=null,d=null;if(i.eqs(y.type,"mouseover")){if(d=i.getMDom(x,z,[{tagName:"a",attrName:"treeNode"+n.id.A}])){g=i.getNodeMainDom(d).id,m="hoverOverNode"}}else{if(i.eqs(y.type,"mouseout")){d=i.getMDom(x,v,[{tagName:"a",attrName:"treeNode"+n.id.A}]),d||(g="remove",m="hoverOutNode")}else{if(i.eqs(y.type,"mousedown")&&(d=i.getMDom(x,z,[{tagName:"a",attrName:"treeNode"+n.id.A}]))){g=i.getNodeMainDom(d).id,m="mousedownNode"}}}if(g.length>0){switch(u=c.getNodeCache(x,g),m){case"mousedownNode":w=q.onMousedownNode;break;case"hoverOverNode":w=q.onHoverOverNode;break;case"hoverOutNode":w=q.onHoverOutNode}}return{stop:!1,node:u,nodeEventType:m,nodeEventCallback:w,treeEventType:"",treeEventCallback:null}});c.addInitRoot(function(d){var d=c.getRoot(d),f=c.getRoots();d.curEditNode=null;d.curEditInput=null;d.curHoverNode=null;d.dragFlag=0;d.dragNodeShowBefore=[];d.dragMaskList=[];f.showHoverDom=!0});c.addZTreeTools(function(d,f){f.cancelEditName=function(g){c.getRoot(this.setting).curEditNode&&k.cancelCurEditNode(this.setting,g?g:null,!0)};f.copyNode=function(m,g,o,v){if(!g){return null}if(m&&!m.isParent&&this.setting.data.keep.leaf&&o===n.move.TYPE_INNER){return null}var u=this,w=i.clone(g);if(!m){m=null,o=n.move.TYPE_INNER}o==n.move.TYPE_INNER?(g=function(){k.addNodes(u.setting,m,[w],v)},i.canAsync(this.setting,m)?k.asyncNode(this.setting,m,v,g):g()):(k.addNodes(this.setting,m.parentNode,[w],v),k.moveNode(this.setting,m,w,o,!1,v));return w};f.editName=function(g){g&&g.tId&&g===c.getNodeCache(this.setting,g.tId)&&(g.parentTId&&k.expandCollapseParentNode(this.setting,g.getParentNode(),!0),k.editNode(this.setting,g))};f.moveNode=function(m,g,o,v){function u(){k.moveNode(w.setting,m,g,o,!1,v)}if(!g){return g}if(m&&!m.isParent&&this.setting.data.keep.leaf&&o===n.move.TYPE_INNER){return null}else{if(m&&(g.parentTId==m.tId&&o==n.move.TYPE_INNER||a(g,this.setting).find("#"+m.tId).length>0)){return null}else{m||(m=null)}}var w=this;i.canAsync(this.setting,m)&&o===n.move.TYPE_INNER?k.asyncNode(this.setting,m,v,u):u();return g};f.setEditable=function(g){this.setting.edit.enable=g;return this.refresh()}});var l=k.cancelPreSelectedNode;k.cancelPreSelectedNode=function(f,m){for(var v=c.getRoot(f).curSelectedList,u=0,o=v.length;u<o;u++){if(!m||m===v[u]){if(k.removeTreeDom(f,v[u]),m){break}}}l&&l.apply(k,arguments)};var j=k.createNodes;k.createNodes=function(f,g,o,m){j&&j.apply(k,arguments);o&&k.repairParentChkClassWithSelf&&k.repairParentChkClassWithSelf(f,m)};var b=k.makeNodeUrl;k.makeNodeUrl=function(d,f){return d.edit.enable?null:b.apply(k,arguments)};var p=k.removeNode;k.removeNode=function(d,f){var g=c.getRoot(d);if(g.curEditNode===f){g.curEditNode=null}p&&p.apply(k,arguments)};var h=k.selectNode;k.selectNode=function(f,g,o){var m=c.getRoot(f);if(c.isSelectedNode(f,g)&&m.curEditNode==g&&g.editNameFlag){return !1}h&&h.apply(k,arguments);k.addHoverDom(f,g);return !0};var e=i.uCanDo;i.uCanDo=function(d,f){var g=c.getRoot(d);if(f&&(i.eqs(f.type,"mouseover")||i.eqs(f.type,"mouseout")||i.eqs(f.type,"mousedown")||i.eqs(f.type,"mouseup"))){return !0}if(g.curEditNode){k.editNodeBlur=!1,g.curEditInput.focus()}return !g.curEditNode&&(e?e.apply(k,arguments):!0)}})(jQuery);