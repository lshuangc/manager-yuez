"use strict";var panel={init:function(){common.bind_Sanji();this.housingPagIng2()},housingPagIng2:function(a){$.ajax({type:"POST",url:urlScope+"/Community/findByScreen",dataType:"json",data:{page:a||1,rows:10,type:1},success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.housingPagIng2(d.curr)}}})},error:function(b){layer.msg("网络错误",{icon:1,time:1000})}})},ShowElementName:function(a,d){var c=a.innerHTML;var b=document.createElement("input");b.type="text";b.value=c;b.onblur=function(){$.ajax({type:"POST",url:urlScope+"/Community/updateCommuity",data:{id:d,name:$(this).val()},dataType:"json",success:function(e){panel.housingPagIng2}});a.innerHTML=this.value?this.value:c;a.setAttribute("ondblclick","ondblclickEditor(this);")};a.innerHTML="";a.appendChild(b);b.setSelectionRange(0,c.length);b.focus();b.parentNode.setAttribute("ondblclick","")},house_search:function(a){$.ajax({type:"POST",url:urlScope+"/Community/findByScreen",data:{page:a||1,rows:10,startTime:$("#datemin").val(),endTime:$("#datemax").val(),name:$("#housingName").val(),provinceCode:$("#sheng").val(),cityCode:$("#shi").val(),countyCode:$("#qu").val(),housetypeId:$("#housingId").val(),type:1},dataType:"json",success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.house_search(d.curr)}}})},error:function(b){layer.msg("网络错误!",{icon:1,time:1000})}})},housing_add:function(d,b,a,c){layer_show(d,b,a,c)},housing_edit:function(d,b,e,a,c){layer_show(d,b,a,c)},revise:function(d,b,e,a,c){layer_show(d,b,a,c)},lunbotu_edit:function(d,b,e,a,c){layer_show(d,b,a,c)},packQueryData:function(e){if(e.result!="1"){layer.msg("获取数据失败",{icon:1,time:1000});return}var c=e.object;var e=c.data;var b="";for(var d=0;d<e.length;d++){b+='<tr class="text-c"><td>'+(d+1)+'</td><td><img src="'+imgurl+"community/"+e[d].imgUrl+'" ></td><td class="td-manage"><a href="javascript:;" onclick=panel.lunbotu_edit("预览","lunbotu-check.html?configId='+e[d].id+'","1","1000","700") class="label-success  radius label">预览</a></td><td ondblclick="panel.ShowElementName(this,'+e[d].id+')">'+e[d].name+"</td><td>"+e[d].provinceName+","+e[d].cityName+","+e[d].countyName+"</td><td>"+e[d].address+"</td><td>"+e[d].houseTypeRange+"</td><td>"+e[d].houseProportionRange+"</td><td>"+e[d].propertyName+"</td><td>"+e[d].devloper+"</td><td>"+e[d].sellerCommpanyName+"</td><td>"+common.dateFormat(e[d].communityAddtime.time)+'</td><td class="td-manage"><a href="javascript:;" onclick=panel.housing_edit("户型佣金管理","house_type_manager.html?communityid='+e[d].id+'","1","1000","700") class="label-success  radius label">查看</a></td><td class="td-manage"><a href="javascript:;" onclick=panel.revise("修改","housing-estate-manager_revise.html?reviseid='+e[d].id+'","1","1000","700") class="label-success  radius label">修改</a></td></tr>'}$("tbody").html(b);$(".r > strong").html(c.totalNumber);var a=Math.ceil(c.totalNumber/c.pageSize);return a;if(type==2){$("td:last-child").hide()}}};$(function(){panel.init();$(".aclick").click(function(){$(this).addClass("btn-primary").siblings().removeClass("btn-primary")});$("a:nth-child(2)").click(function(){$("#xiangmu").hide();$("th:last-child").hide();$("td:last-child").hide()});$("a:nth-child(1)").click(function(){$("#xiangmu").show();$("tr th:last-child").show()})});