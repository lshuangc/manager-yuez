"use strict";
var panel = {
    init: function () {
        this.recommend_manager_describe()
    }, recommend_manager_describe: function () {
        $.ajax({
            type: "post",
            url: urlScope + "/recommendRecord/findById",
            dataType: "json",
            data: {recordId: common.getQueryString("id")},
            success: function (g) {
                if (g.result != "1") {
                    layer.msg("获取数据失败", {icon: 1, time: 1000});
                    return
                }
                var g = g.object;
                var a = "";
                for (var d = 0; d < g.length; d++) {
                    var h = "";
                    switch (g[d].recommendFlow) {
                        case"1":
                            h = "已推荐";
                            break;
                        case"2":
                            h = "推荐单已审核";
                            break;
                        case"3":
                            h = "推荐单已确认";
                            break;
                        case"4":
                            h = "上门已确认";
                            break;
                        case"5":
                            h = "待客确认单已提交";
                            break;
                        case"6":
                            h = "待客确认单已审核";
                            break;
                        case"7":
                            h = "签约单已提交";
                            break;
                        case"8":
                            h = "签约单已审核";
                            break;
                        case"9":
                            h = "签约单已确认";
                            break;
                        case"905":
                            h = "运营复核";
                            break;
                        default:
                            h = "佣金已发放"
                    }
                    var b = "";
                    switch (g[d].recommendStatus) {
                        case"1":
                            b = "正常";
                            break;
                        case"2":
                            b = "取消";
                            break;
                        case"3":
                            b = "签约";
                            break;
                        default:
                            b = "完成"
                    }
                    var f = g[d].recommendRewardType == "1" ? "小区" : "二手房";
                    var e = g[d].recommendProjectType == "1" ? "新房" : "二手";
                    var c = g[d].recommendGettype == "1" ? "立即申请 20%" : "回款申请 100%";
                    a += '<div class="row cl">   ' +
                        ' <span class=" col-xs-6 col-sm-6">销售员姓名：' + g[d].sellersUserName + '</span>' +
                        '<span class="col-xs-6 col-sm-6">推荐单生成日期：' + common.dateFormat(g[d].recommendAddTime.time) + '</span>' +
                        '</div><div class="row cl">    <span class=" col-xs-6 col-sm-6">销售员电话：' + g[d].sellersUserPhone + '</span>' +
                        '<span class="col-xs-6 col-sm-6">流程编号推荐单流程：' + h + '</span>' +
                        '</div><div class="row cl"><span class="col-xs-6 col-sm-6">推荐单类型：' + e + '</span>' +
                        '<span class="col-xs-6 col-sm-6">推荐单消息提示：' + g[d].approveMessage + '</span>' +
                        '</div><div class="row cl">  ' +
                        '  <span class=" col-xs-6 col-sm-6">带客人姓名：' + g[d].realUserName + '</span>' +
                        '<span class="col-xs-6 col-sm-6">推荐项目类型：' + f + '</span>' +
                        '</div><div class="row cl">   ' +
                        ' <span class=" col-xs-6 col-sm-6">带客人电话：' + g[d].realUserPhone + '</span>' +
                        '<span class="col-xs-6 col-sm-6">推荐单状态：' + b + '</span>' +
                        '</div><div class="row cl"><span class="col-xs-6 col-sm-6">推荐小区地址：' + g[d].recommendProjectAddress + '</span>' +
                        '<span class="col-xs-6 col-sm-6">推荐项目名称：' + g[d].recommendProjectName + '</span>' +
                        '</div><div class="row cl">    <span class=" col-xs-6 col-sm-6">推荐人姓名：' + g[d].userName + '</span>' +
                        '<span class="col-xs-6 col-sm-6">佣金领取类型：' + c + '</span>' +
                        '</div><div class="row cl">   ' +
                        ' <span class=" col-xs-6 col-sm-6">推荐人电话：' + g[d].userPhone + '</span>' +
                        '<span class=" col-xs-6 col-sm-6">估算的推荐佣金：' + g[d].recommendSendmoney + '</span>' +
                        '</div><div class="row cl">   ' +
                        '<span class=" col-xs-6 col-sm-6">被推荐人姓名：' + g[d].recommendUserName + '</span>' +
                        '<span class=" col-xs-6 col-sm-6">推荐佣金：' + g[d].makeMoney + '</span>' +
                        '</div><div class="row cl">    <span class=" col-xs-6 col-sm-6">被推荐人电话：' + g[d].recommendUserPhone + '</span>   ' +
                        '<span class=" col-xs-6 col-sm-6">最终购房成交金额：' + g[d].contractMoney + '</span>' +
                        '</div><div class="row cl"><span class="col-xs-6 col-sm-6">推荐单备注：' + g[d].recommendDescr + '</span>' +
                        '</div><div class="row cl">   ' +
                        ' <span class="col-xs-4 col-sm-4 bigImg" data-bigImg="' + imgurl + "recommend/" + g[d].approveBill + '" data-num="1">购房发票：<img src="' + imgurl + "recommend/" + g[d].approveBill + '")" alt="图片待上传"></span>' +
                        '<span class="col-xs-4 col-sm-4 bigImg" data-bigImg="' + imgurl + "recommend/" + g[d].approveBuyhouse + '" data-num="1">购房合同页图片：<img src="' + imgurl + "recommend/" + g[d].approveBuyhouse + '")"  alt="图片待上传"></span>' +
                        '<span class="col-xs-4 col-sm-4 bigImg" data-bigImg="' + imgurl + "recommend/" + g[d].approveReceive + '" data-num="1">待客现场确认图片：<img src="' + imgurl + "recommend/" + g[d].approveReceive + '")" alt="图片待上传"> </span></div>'
                }
                $("form").html(a)
            },
            error: function (a) {
                layer.msg("网络错误", {icon: 1, time: 1000})
            }
        })
    }
};
$(function () {
    panel.init();
    $(document).on("click", ".bigImg", function () {
        if ($(this).attr("data-num") == "1") {
            $("#bigImg").css({
                display: "block",
                background: "url(" + $(this).attr("data-bigImg") + ") no-repeat",
                "background-size": "100% 100%"
            });
            $(this).attr("data-num", "2");
            $("#zhezhao").show()
        } else {
            $("#bigImg").hide();
            $(".bigImg").attr("data-num", "1")
        }
    });
    $("#bigImg").click(function () {
        $(this).hide();
        $(".bigImg").attr("data-num", "1");
        $("#zhezhao").hide()
    });
    $("#zhezhao").click(function () {
        $(this).hide();
        $(".bigImg").attr("data-num", "1");
        $("#bigImg").hide()
    })
});