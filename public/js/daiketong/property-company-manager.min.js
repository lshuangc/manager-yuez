"use strict";var panel={init:function(){this.propertyPagIng();setInterval(function(){panel.propertyPagIng()},100000)},propertyPagIng:function(a){$.ajax({type:"POST",url:urlScope+"/Property/findAllByPage",dataType:"json",data:{page:a||1,rows:10},success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.propertyPagIng(d.curr)}}})},error:function(b){layer.msg("网络错误",{icon:1,time:1000})}})},property_search:function(a){$.ajax({type:"POST",url:urlScope+"/Property/findAllByPage",data:{page:a||1,rows:10,startTime:$("#datemin").val(),endTime:$("#datemax").val(),propertyName:$("#propertyName").val(),propertyStatus:$("#propertyProState").val()},dataType:"json",success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.property_search(d.curr)}}})},error:function(b){layer.msg("网络错误!",{icon:1,time:1000})}})},property_add:function(d,b,a,c){layer_show(d,b,a,c)},property_stop_start:function(a,b,c){c=c=="1"?"0":"1";layer.confirm(c=="1"?"确定要启用吗？":"确定要禁用吗？",function(d){$.ajax({type:"POST",url:urlScope+"/Property/updateProperty",data:{propertyId:b,propertyStatus:c},dataType:"json",success:function(e){layer.msg(e.result=="1"?"启用失败":"禁用失败",{icon:1,time:1000});location.replace(location.href)},error:function(e){layer.msg("网络错误!",{icon:1,time:1000})}})})},propertyProState:function(a){$.ajax({type:"POST",dataType:"json",url:urlScope+"/Property/findAllByPage",data:{page:a||1,rows:10,startTime:$("#datemin").val(),endTime:$("#datemax").val(),propertyName:$("#propertyName").val(),propertyStatus:$("#propertyProState").val()},success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.propertyProState(d.curr)}}})},error:function(b){layer.msg("网络错误!",{icon:1,time:1000})}})},packQueryData:function(f){if(f.result!="1"){layer.msg("获取数据失败",{icon:1,time:1000});return}var c=f.object;var f=c.data;var b="";for(var d=0;d<f.length;d++){var g=f[d].propertyStatus=="1"?"启用":"禁用";var e=f[d].propertyStatus=="1"?"label-success":"";b+='<tr class="text-c"><td>'+(d+1)+"</td><td>"+f[d].propertyName+"</td><td>"+common.dateFormat(f[d].addTime.time)+'</td><td class="td-status"><span class="label '+e+' radius">'+g+"</span><input type=hidden  value="+f[d].propertyStatus+' id=proStatusId></td><td class="f-14 product-brand-manage"><a class="label label-success radius" onClick="panel.property_stop_start(this,'+f[d].propertyId+","+f[d].propertyStatus+')" href="javascript:;" title="禁用" style="text-decoration:none" >修改状态</a></td></tr>'}$("tbody").html(b);$(".r > strong").html(c.totalNumber);var a=Math.ceil(c.totalNumber/c.pageSize);return a}};$(function(){panel.init()});