var panel={init:function(){common.bind_Sanji();$("#housing_add").unbind("click").bind("click",this.housingEstateAdd);$("#propertyId").unbind("click").bind("input propertychange",this.wuye);$("#propertyId").unbind("click").bind("focus",this.wuye);$("#sellersId").unbind("click").bind("input propertychange",this.xiaoshoufang);$("#sellersId").unbind("click").bind("focus",this.xiaoshoufang);$("#imgUrl").change(function(){common.fileType(imgUrl)})},housingEstateAdd:function(){if(!$("#imgUrl").val()||!$("#name").val()||!$("#sheng").val()||!$("#shi").val()||!$("#qu").val()||!$("#address").val()||!$("#houseTypeRange").val()||!$("#houseProportionRange").val()||!$("#devloper").val()||!$("#sellersId").val()||!$("#propertyId").val()||!$("#sellingPoint").val()||!$("#periPhery").val()||!$("#details").val()){layer.msg("请填写完整后提交!",{icon:1,time:1000});return}$("#coordinate3").val($("#coordinate").val()+","+$("#coordinate2").val());var a=new FormData(document.getElementById("form-add"));$.ajax({type:"post",url:urlScope+"/Community/addCommunity",data:a,dataType:"json",processData:false,contentType:false,xhrFields:{withCredentials:true},beforeSend:function(){common.disabledButton("#housing_add")},success:function(b){if(b.result!="1"){layer.msg("小区添加失败!",{icon:1,time:1000});return}else{layer.msg("小区添加成功!",{icon:1,time:1000})}window.parent.location.reload()},error:function(b,d,c){layer.msg("网络错误!",{icon:1,time:1000})}})},wuye:function(){$(".propertyList").css("display","block");$.ajax({type:"post",url:urlScope+"/Property/findPropertyByStatus",data:{likeName:$("#propertyId").val()},dataType:"json",success:function(c){var c=c.object;var a="";for(var b=0;b<c.length;b++){a+="<li value="+c[b].propertyId+">"+c[b].propertyName+"</li>"}$(".propertyList").html(a);$(".propertyList>li").attr("onclick","panel.onblurfuc(this)")}})},onblurfuc:function(a){$("#propertyId").val(a.textContent);$("#propertyVal").val(a.value);$(".propertyList").hide()},xiaoshoufang:function(){$(".sellersList").css("display","block");$.ajax({type:"post",url:urlScope+"/sellersCompany/getLikeCompanyName",data:{likeName:$("#sellersId").val()},success:function(c){var c=JSON.parse(c);var c=c.object;var a="";for(var b=0;b<c.length;b++){a+="<li value="+c[b].sellersCompanyId+">"+c[b].companyName+"</li>"}$(".sellersList").html(a);$(".sellersList>li").attr("onclick","panel.onblurfucn(this)")}})},onblurfucn:function(a){$("#sellersId").val(a.textContent);$("#sellersVal").val(a.value);$(".sellersList").hide()}};$(function(){panel.init()});