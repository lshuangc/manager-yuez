var panel={init:function(){this.userPagIng()},userPagIng:function(a){$.ajax({type:"post",url:urlScope+"/user/findToHouTai",dataType:"json",data:{page:a||1,rows:10},success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.userPagIng(d.curr)}}})},error:function(b){layer.msg("网络错误",{icon:1,time:1000})}})},user_manager_search:function(a){$.ajax({type:"POST",url:urlScope+"/user/findToHouTai",data:{page:a||1,rows:10,startTime:$("#datemin").val(),endTime:$("#datemax").val(),userNameOrPohoe:$("#userNameOrPohoe").val(),banckcardStatus:$("#banckcardStatus").val(),idCardStatus:$("#idCardStatus").val()},dataType:"json",success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.user_manager_search(d.curr)}}})},error:function(b){layer.msg("网络错误!",{icon:1,time:1000})}})},idCardStatus:function(a){$.ajax({type:"POST",url:urlScope+"/user/findToHouTai",data:{page:a||1,rows:10,idCardStatus:$("#idCardStatus").val(),startTime:$("#datemin").val(),endTime:$("#datemax").val(),userNameOrPohoe:$("#userNameOrPohoe").val(),banckcardStatus:$("#banckcardStatus").val()},dataType:"json",success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.idCardStatus(d.curr)}}})},error:function(b){layer.msg("网络错误!",{icon:1,time:1000})}})},banckcardStatus:function(a){$.ajax({type:"POST",url:urlScope+"/user/findToHouTai",data:{page:a||1,rows:10,banckcardStatus:$("#banckcardStatus").val(),idCardStatus:$("#idCardStatus").val(),startTime:$("#datemin").val(),endTime:$("#datemax").val(),userNameOrPohoe:$("#userNameOrPohoe").val()},dataType:"json",success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.banckcardStatus(d.curr)}}})},error:function(b){layer.msg("网络错误!",{icon:1,time:1000})}})},user_stop_start:function(b,c,a){layer.confirm("请详细审查信息后再确认审核是否通过",{btn:["通过","驳回"],title:"审核是否通过"},function(){$.ajax({type:"POST",url:urlScope+"/user/updateToIdCardStatus",data:{id:c,idCardStatus:3},dataType:"json",success:function(d){if(d.result!="1"){layer.msg("审核失败",{icon:1,time:1000});return}location.replace(location.href);layer.msg("审核成功",{icon:1,time:1000})},error:function(d){layer.msg("网络错误!",{icon:1,time:1000})}})},function(){$.ajax({type:"POST",url:urlScope+"/user/updateToIdCardStatus",data:{id:c,idCardStatus:4},dataType:"json",success:function(d){if(d.result!="1"){layer.msg("驳回失败",{icon:1,time:1000});return}location.replace(location.href);layer.msg("驳回成功",{icon:1,time:1000})},error:function(d){layer.msg("网络错误!",{icon:1,time:1000})}})})},packQueryData:function(g){if(g.result!="1"){layer.msg("获取数据失败",{icon:1,time:1000});return}var c=g.object;var g=c.data;var b="";for(var e=0;e<g.length;e++){var d="";switch(g[e].idCardStatus){case"1":d="身份未认证";break;case"2":d="身份证信息已提交，待审核";break;case"3":d="已实名认证";break;default:d="审核失败"}var f="";switch(g[e].banckcardStatus){case"1":f="银行卡未认证";break;default:f="银行卡已绑定"}b+='<tr class="text-c"><td>'+(e+1)+"</td><td>"+g[e].realName+'</td><td class="bigImg" data-bigImg="'+imgurl+"users/"+g[e].idCardImg1+'" data-num="1"><img src="'+imgurl+"users/"+g[e].idCardImg1+'"></td><td class="bigImg" data-bigImg="'+imgurl+"users/"+g[e].idCardImg2+'" data-num="1"><img src="'+imgurl+"users/"+g[e].idCardImg2+'"></td><td class="bigImg" data-bigImg="'+imgurl+"users/"+g[e].idCardImg3+'" data-num="1"><img src="'+imgurl+"users/"+g[e].idCardImg3+'"></td><td>'+g[e].idCardNumber+'</td><td class="td-status"><span class="  radius">'+d+"</span></td><td>"+g[e].userPhone+'</td> <input type="hidden" value='+g[e].idCardStatus+"> </td><td>"+common.dateFormat(g[e].registerTime.time)+"</td><td>"+g[e].bankcardUsename+"</td><td>"+g[e].bankcardNumber+"</td><td>"+g[e].bankAddress+'</td><td class="td-status"><span class="  radius">'+f+'</span> <input type="hidden" value='+g[e].banckcardStatus+'> </td><td class="f-14 product-brand-manage">';if(g[e].idCardStatus=="2"){b+='<a class="label label-success radius" onClick="panel.user_stop_start(this,'+g[e].id+","+g[e].idCardStatus+')" href="javascript:;" title="审核" style="text-decoration:none" >审核</a>'}if(g[e].idCardStatus=="3"){b+='<a class="label radius"  href="javascript:;" title="已审核" style="text-decoration:none" >已审核</a>'}if(g[e].idCardStatus=="4"){b+='<a class="label radius"  href="javascript:;" title="已驳回" style="text-decoration:none" >已驳回</a>'}if(g[e].idCardStatus=="1"){b+='<a class="label radius"  href="javascript:;" title="身份未认证" style="text-decoration:none" >身份未认证</a>'}b+="</td></tr>"}$("tbody").html(b);$(".r > strong").html(c.totalNumber);var a=Math.ceil(c.totalNumber/c.pageSize);return a}};$(function(){panel.init();$(document).on("click",".bigImg",function(){if($(this).attr("data-num")=="1"){$("#bigImg").css({display:"block",background:"url("+$(this).attr("data-bigImg")+") no-repeat","background-size":"100% 100%"});$(this).attr("data-num","2");$("#zhezhao").show()}});$("#bigImg").click(function(){$(this).hide();$(".bigImg").attr("data-num","1");$("#zhezhao").hide()});$("#zhezhao").click(function(){$(this).hide();$(".bigImg").attr("data-num","1");$("#bigImg").hide()})});