var panel={init:function(){this.informationPagIng()},informationPagIng:function(a){$.ajax({type:"post",url:urlScope+"/information/findAllByPage",dataType:"json",data:{page:a||1,rows:10},success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.informationPagIng(d.curr)}}})},error:function(b){layer.msg("网络错误",{icon:1,time:1000})}})},information_del:function(b,a){layer.confirm("确认要删除吗？",function(c){$.ajax({type:"POST",url:urlScope+"/information/deleteInformation",data:{informationId:a},dataType:"json",success:function(d){if(d.result!="1"){layer.msg("删除数据失败",{icon:1,time:1000});return}layer.msg("已删除!",{icon:1,time:1000});location.replace(location.href)},error:function(d){layer.msg("网络错误!",{icon:1,time:1000})}})})},deleSeltedRecords:function(){var a=$("table > tbody > tr > td > input[type='checkbox']:checked");var c="";for(var b=0;b<a.length;b++){c+=a[b].parentElement.nextSibling.nextSibling.innerText+","}c=c.substring(0,c.length-1);if(c!=""){layer.confirm("确定删除所选记录？",function(d){$.ajax({type:"post",url:urlScope+"/information/deleteInformation",data:{informationId:c},dataType:"json",success:function(e){if(e.result!="1"){layer.msg("删除数据失败",{icon:1,time:1000});return}layer.msg("已删除!",{icon:1,time:1000});location.replace(location.href)},error:function(e){layer.msg("网络错误!",{icon:1,time:1000})}})})}else{layer.msg("请选择要删除的选项",{icon:1,time:1000})}},informationAdd:function(d,b,a,c){layer_show(d,b,a,c)},information_search:function(a){$.ajax({type:"POST",url:urlScope+"/information/findAllByPage",data:{page:a||1,rows:10,startTime:$("#datemin").val(),endTime:$("#datemax").val(),informationTitle:$("#informationTitle").val()},dataType:"json",success:function(c){var b=panel.packQueryData(c);laypage({cont:$("#pageDiv"),pages:b,skip:true,skin:"#5a98de",groups:5,curr:a||1,jump:function(d,e){if(!e){panel.information_search(d.curr)}}})},error:function(b){layer.msg("网络错误!",{icon:1,time:1000})}})},packQueryData:function(e){if(e.result!="1"){layer.msg("获取数据失败",{icon:1,time:1000});return}var c=e.object;var e=c.data;var b="";for(var d=0;d<e.length;d++){b+='<tr class="text-c"><td><input type="checkbox" value="" name=""></td><td>'+(d+1)+"</td><td>"+e[d].informationId+"</td><td>"+e[d].informationTitle+'</td><td><img src="'+imgurl+"information/"+e[d].informationPhoto+'")"></td><td>'+e[d].informationTxt+"</td><td>"+common.dateFormat(e[d].informationDate.time)+'</td><td class="td-manage"><a title="删除" href="javascript:;" onclick=panel.information_del(this,'+e[d].informationId+') class="ml-5" style="text-decoration:none"><i class="Hui-iconfont">&#xe6e2;</i></a></td></tr>'}$("tbody").html(b);$(".r > strong").html(c.totalNumber);var a=Math.ceil(c.totalNumber/c.pageSize);return a}};$(function(){panel.init()});