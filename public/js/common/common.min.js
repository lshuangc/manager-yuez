var common={showErrorTip:function(c,b){var a='<div id="tip"><span id="x" onclick="yincang()">×</span><strong>'+c+"</strong></div>";$(b).html(a)},showSuccessTip:function(c,b){var a='<div id="tip"><strong>'+c+"</strong></div>";$(b).html(a)},disabledButton:function(a){$(a).attr("style","background: gray;");$(a).attr("disabled","disabled")},abledButton:function(a){$(a).removeAttr("disabled");$(a).removeAttr("style")},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");var c=window.location.search.substr(1).match(b);if(c!=null){return unescape(c[2])}return null},dateFormat:function(b){var c=new Date(b);Date.prototype.toLocaleString=function(){var d=this.getMinutes()<=10?"0"+this.getMinutes():this.getMinutes();return this.getFullYear()+"-"+(this.getMonth()+1)+"-"+this.getDate()+" "+this.getHours()+":"+d};var a=c.toLocaleString();return a},isLogin:function(b){var a=false;$.ajax({type:"post",url:urlScope+"/admin/isLogin",async:false,xhrFields:{withCredentials:true},success:function(c){var c=JSON.parse(c);if(c.result!="1"){window.parent.location.reload();window.location.href="./login.html"}else{if(b){var d=c.object.adminRole;switch(b){case"admin-list.html":if(d=="1"){a=true}else{window.location.href="../404.html"}break}}}},error:function(){layer.msg("网络错误",{icon:1,time:1000})}});return a},pageName:function(){var c=location.href;var a=c.split("/");var b=a[a.length-1];return b},province:function(){$.ajax({type:"POST",url:urlScope+"/org/getAllProvinces",dataType:"json",success:function(d){if(d.result!="1"){layer.msg("获取数据失败",{icon:1,time:1000});return}var b=d.object;var a='<option value="">全部</option>';for(var c=0;c<b.length;c++){a+="<option value="+b[c].code+">"+b[c].name+"</option>"}$("#province").html(a)},error:function(a){layer.msg("网络错误!",{icon:1,time:1000})}})},bind_Sanji:function(){var a;$.ajax({type:"POST",url:urlScope+"/org/getSanJi",dataType:"json",data:{},success:function(e){a=e.object;var b=document.getElementById("sheng");var d=document.getElementById("shi");var f=document.getElementById("qu");b.options[0]=new Option("全部"," ");d.options[0]=new Option("全部"," ");f.options[0]=new Option("全部"," ");for(var c=0;c<a.length;c++){b.options[b.length]=new Option(a[c].name,a[c].code);b.onchange=function(){d.options.length=0;f.options.length=0;d.options[0]=new Option("全部"," ");f.options[0]=new Option("全部"," ");for(var g=0;g<a[b.selectedIndex-1].shi.length;g++){d.options[d.length]=new Option(a[b.selectedIndex-1].shi[g].name,a[b.selectedIndex-1].shi[g].code);d.onchange=function(){f.options.length=0;f.options[0]=new Option("全部"," ");for(var h=0;h<a[b.selectedIndex-1].shi[d.selectedIndex-1].qu.length;h++){f.options[f.length]=new Option(a[b.selectedIndex-1].shi[d.selectedIndex-1].qu[h].name,a[b.selectedIndex-1].shi[d.selectedIndex-1].qu[h].code)}}}}}},error:function(b){layer.msg("网络错误",{icon:1,time:1000})}})},bind_communitySelect:function(b){var a=$(b).val();$.ajax({type:"post",url:urlScope+"/Community/findByScreen",datatype:"json",data:{countyCode:a,page:1,rows:10},success:function(g){var f=JSON.parse(g);var c=document.getElementById("communityId");c.options[0]=new Option("全部"," ");var d=f.object.data;for(var e=0;e<d.length;e++){c.options[e+1]=new Option(d[e].name,d[e].id)}},error:function(c){layer.msg("网络错误",{icon:1,time:1000})}})},ondblclickEditor:function(a,d){var c=a.innerHTML;if(c.indexOf('type="text"')>0){return}var b=document.createElement("input");b.type="text";b.value=c;b.onblur=function(){if(this.value==c){a.innerHTML=c}else{$.ajax({type:"POST",url:urlScope+"/",data:{id:d,housetypeName:$(this).val()},dataType:"json",success:function(e){if(e.result=="0"){layer.msg("修改失败",{icon:1,time:1000});return}else{if(e.result=="1"){layer.msg("修改成功",{icon:1,time:1000})}else{layer.msg("修改失败，户型已经存在!",{icon:1,time:1000})}}setTimeout(function(){window.location.reload()},1000)}});a.innerHTML=this.value}};a.innerHTML="";a.appendChild(b);b.setSelectionRange(0,c.length);b.focus()},deleSeltedRecords:function(){var d=$("table > tbody > tr > td > input[type='checkbox']:checked");var a=$("table > tbody > tr > td > input[type='checkbox']:checked");var c="";for(var b=0;b<a.length;b++){c+=a[b].parentElement.nextSibling.nextSibling.innerText+","}c=c.substring(0,c.length-1);console.log(c);if(c!=""){layer.confirm("确定删除所选记录？",function(e){$.ajax({type:"post",url:urlScope+"/",data:{ids:c},dataType:"json",success:function(f){if(f.result!="1"){layer.msg("删除数据失败",{icon:1,time:1000});return}layer.msg("已删除!",{icon:1,time:1000});location.replace(location.href)},error:function(f){layer.msg("网络错误!",{icon:1,time:1000})}})})}else{layer.msg("请选择要删除的选项",{icon:1,time:1000})}},fileType:function(j){var b=/msie/i.test(navigator.userAgent)&&!window.opera;var e=0;var g=[".jpg",".png","bmp","gif","jpeg"];var m=j.value;var h=1024*3;if(m){var k=false;var a=m.substring(m.indexOf("."));if(g&&g.length>0){for(var f=0;f<g.length;f++){if(g[f]==a){k=true;break}}}if(!k){alert("您上传的文件不是图片,请重新上传！");j.value="";return false}}else{return false}if(b&&!j.files){var d=j.value;var l=new ActiveXObject("Scripting.FileSystemObject");if(!l.FileExists(d)){alert("您上传的图片不存在，请重新输入！");return false}var c=l.GetFile(d);e=c.Size}else{e=j.files[0].size}var n=e/1024;if(n>h){alert("您上传的图片大小不能大于"+h/1024+"M！");j.value="";return false}if(n<=0){alert("您上传的图片大小不能为0M！");j.value="";return false}},limitFileCountCheck:function(e){var b=$("#tbodyId > tr").length;var a=8;if(window.File&&window.FileList){var d=e.carouselFigureImg.files.length;var c=a-b;if(d+b>a){window.alert("页面上只能显示5-8张图片，最多只能选择"+c+"张了");document.getElementById("carouselFigureImg").valal="";return}else{window.alert("页面上只能显示5-8张图片，你选择了"+d+"张")}}else{window.alert("抱歉，你的浏览器不支持FileAPI，请升级浏览器！")}return false}};